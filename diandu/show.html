<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>点读</title>
    <link rel="stylesheet" href="css/mobile.css">
</head>

<body>
    <div id="main" class="m-bgs">
        <div class="m-bg">
            <div class="m-dd-start"></div>
            <div id="all-radius" data-hide="all-radius-hide">
                <div class="radius" style="left:100px; top:10px;">
                    <div class="radius-in">1</div>
                </div>
                <div class="radius">
                    <div class="radius-in">2</div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/lib/zepto.min.js">
    </script>
    <script type="text/javascript">
    var click = IsPC ? 'click' : 'tap';
    $(function() {
        init();
        bindEvent();
    });

    function init() {
        var height = screen.width / 1200 * 675;
        console.log('width', screen.width, '==>height', height);
        $('#main').css({
            height: height
        });
    }

    function bindEvent() {
        // 启动开关
        $('.m-dd-start').on(click, function(e) {
            e.stopPropagation(); //阻止冒泡，否则背景会触发点击事件
            setHoverImgSrcx($(e.target));

            var $allRadius = $('#all-radius');
            var hideClassName = $allRadius.attr('data-hide');
            if ($allRadius.hasClass(hideClassName)) {
                $allRadius.removeClass();
            } else {
                $allRadius.addClass(hideClassName);
            }
        });

        
    }

    /**
     * 设置图标选中的图片地址
     * @param {[type]} $target [点击图标的Jquery对象]
     */
    function setHoverImgSrcx($target) {
        var imgSrc = $target.css('background-image') || $target.css('backgroundImage');
        if (imgSrc.indexOf("_on") === -1) {
            var srcs = imgSrc.split('.');
            var hoverImgSrc = srcs[0] + '_on.' + srcs[1];
            $target.css('backgroundImage', hoverImgSrc);
        } else {
            var srcs = imgSrc.split('_on');
            var hoverImgSrc = srcs[0] + srcs[1];
            $target.css('backgroundImage', hoverImgSrc);
        }
    }

    function IsPC() {
        var userAgentInfo = navigator.userAgent;
        var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");
        var flag = true;
        for (var v = 0; v < Agents.length; v++) {
            if (userAgentInfo.indexOf(Agents[v]) > 0) {
                flag = false;
                break;
            }
        }
        return flag;
    }
    </script>
</body>

</html>
